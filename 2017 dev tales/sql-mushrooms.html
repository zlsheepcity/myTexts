Благородный Эрик, храбрый воин Макуля и старый пират Кеша пробирались через густые заросли, чтобы не встретить речных разбойников. Заросли проходили через болота. Почва была скользкой от влажных испарений. Уставший Эрик не удержал равновесие и покатился с высокого склона в болотистую низину. 

Убедившись, что все в порядке, Эрик осмотрелся. Он упал в гущу грибов и раздавил огромный гриб — в половину человеческого роста. Остальные грибы бесшумно и неподвижно стояли вокруг Эрика. И было что-то зловещее в этой неподвижности.

— Простите меня, — сказал Эрик.
— Я не имел дурных намерений. Это несчастный случай. Я глубоко сожалею. Вы меня понимаете?

Но грибы никак не реагировали на слова. Неловкий момент исправил Макуля. Он аккуратно спустился со склона и подал Эрику руку, чтобы вытащить из трясины.

— Ты с ними по человечески не разговаривай. — сказал Макуля, указывая на грибы.

— Почему?

— Они обижаются... Наверное, обижаются. Не уверен в правильности наблюдений, эти грибы сложно понять. Зверей понимаю, растения тоже понимаю, а грибы странные.

Эрик оглянулся — стоявшие вокруг грибы молча подтверждали слова Макули. На помощь спустился Кеша и возразил Макуле:

— Это SQL грибы. С ними вполне можно разговаривать. Надо только знать как они устроены.


CREATE TABLE Gribnica
-------------------------

Грибы повязаны тонкими нитями, которые растут из подземной грибницы-таблицы. Грибница-таблица в этом болоте связана с грибницей-таблицей в соседнем лесу и со многими другими. Связывают их гигантские грибные массы — Базы, живущие глубоко под землей.

У нас сказочный мир, где программирование — это магия. Чтобы поговорить с грибницей-таблицей надо откопать Базу и прошептать над ней заклинание:

CREATE TABLE Gribnica
(
  ID      INT PRIMARY KEY NOT NULL,
  Name    TEXT,
  Age     INT,
  Date    DATETIME
);

— Какое жуткое заклинание, — проворчал Макуля.
— Что означает каждая строчка?

Первая строчка должна быть понятна — создать таблицу Грибницу.
Потом волшебные скобки, а внутри скобок через запятую пишутся ниточки, которые тянутся к каждому грибу.

У каждой ниточки есть название и оболочка, которую грибы называют дататайп и пишут ЗАГЛАВНЫМИ БУКВАМИ, — грибам так нравится. Название можно придумать самому, а дататайп надо выбирать, когда придумаешь для чего нужна ниточка:

Например, для нашего разговора с грибом, нужно знать длинное имя —  это дататайп TEXT.
Нужно знать возраст — для чисел используют дататайп INT.
Надо знать время разговора — дататайп DATETIME.

Можете посмотреть другие дататайпы, но помните, что за гиперссылкой сказка заканчивается:
http://www.w3schools.com/sql/sql_datatypes_general.asp


— Что означает первая ниточка с длинным дататайпом?, — спросил Эрик и показал на строчку в заклинании:

ID      INT PRIMARY KEY NOT NULL

Это Айди — самая главная ниточка. Ее обычно колдуют по одной для каждой грибницы-таблицы. И используют, когда хотят найти конкретный гриб или отделить грибы друг от друга. Дататайп у ниточки не длинный, а такой же как для чисел — INT — потому что грибы любят идентифицировать себя по номерам. После дататайпа мы обязательно вручаем ниточке PRIMARY KEY — магический первичный ключ, — чтобы возвысить ниточку среди равных. А еще, просим NOT NULL, чтобы ниточка не была в состоянии NULL.

— Что за состояние такое? Пустое место что-ли?

— Намного страшнее и фатальнее, — ответил Кеша.
— Пустое место может существовать и называться «пустым местом». А с грибным NULL ничего нельзя сделать.
 
От жутких историй стало неуютно. Эрик посмотрел на раздавленный гриб и почувствовал желание поскорее убраться из мрачного мира таблиц. Эрик поторопил товарищей:

— Давайте, как можно скорее внесем извинения в базу и уберемся отсюда. 


INSERT INTO Gribnica
----------------------

Заклинание для грибницы-таблицы мы уже произнесли.
Теперь вставим гриб в созданную грибницу-таблицу. Чтобы составить заклинание нам нужно взять созданные ниточки и привязать к ним значения нашего гриба. Айди пусть будет 1001 — я уже тысячу грибов вставлял подобным заклинанием, этот будет тысяча первым. Скажи, Эрик, какой именно гриб хотим вставить?

— Тот, на который я упал, разумеется.

— Замечательное имя. Подними пожалуйста гриб и определи его возраст по годовым кольцам. А я узнаю точное время...

Друзья занялись подсчетами и через несколько минут у старого пирата получилось заклинание:


INSERT INTO Gribnica 
(
  ID, 
  Name, 
  Age, 
  Date
)
VALUES 
(
  '1001',
  'Тот, на который я упал, разумеется',
  '2000',
  '2017-01-21 21:07:02'
);


— Я вижу две группы в скобках, — сказал Эрик наблюдая за заклинанием.
— В первой группе имена ниточек, во второй группе все что мы узнали о нашем грибе. Мне кажется, что порядок должен быть одинаковым...

— Разумеется одинаковым, чтобы каждая ниточка присоединилась к своему значению.

— Значения пишутся в кавычках. А в самом конце точка с запятой. Она заканчивает заклинание?

— Точка с запятой заканчивает всё.


SELECT Name FROM Gribnica
---------------------------


— И что должно произойти?

— Все уже произошло, — ответил Кеша слегка пиная гриб, проверяя насколько прочно тот вцепился обратно в грибницу.
— Теперь, где-то внутри нашей грибницы-таблицы, вставлен гриб у которого Айди равен единице. И если База воспользуется заклинанием:

SELECT ID 
FROM Gribnica
WHERE Age > '1800'; 

То База получит список айдишников для всех совершеннолетних грибов. И тот гриб, на который ты упал, тоже окажется в списке.

— Я очень рад за грибы, за базы и за таблицу-шмаблицу, — проворчал Макуля.
— И что свое совершеннолетие грибы празнуют на тысяча-восьмисотом году жизни — этому я тоже несказанно рад. Но своим молчанием и хитрой магией грибы показывают свое презрение. Меня это нервирует. Я голоден, и нам надо уходить.

Все согласились. Макуля и Эрик осторожно поднялись по склону. Обернувшись с вершины, Эрик увидел что старый пират покидая грибницу произнес заклинание:

DELETE FROM Gribnica
WHERE Name = 'Съедобный и вкусный гриб';

И теперь убегает прочь от грибницы, держа в руках большой аппетитный гриб к ужину. За его спиной другие грибы продолжали стоять неподвижно, словно ничего не произошло в их таинственном мрачном мире.


Гиперссылки из сказочного мира:
---------------------------------

http://www.w3schools.com/sql/ 
— удобный справочник на английском языке, с техническим объяснением и интерактивными примерами

http://citforum.ru/programming/32less/les44.shtml#1
— описание языка SQL на русском академическом языке

http://www.mysql.ru/docs/man/Introduction.html
— MySQL, самая популярная библиотека SQL языка для веба 1990-2010-х

http://www.tutorialspoint.com/sqlite/sqlite_php.htm
— SQLite, удобная и простая библиотека, для которой не требуется специального сервера

Теги:
-------

#SQL 
#Structured-Query-Language












